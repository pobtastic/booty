<!DOCTYPE html>
<html>
<head>
<title>Booty: Routine at EB8D</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="EB49.html">EB49</a>
</td>
<td class="up">Up: <a href="../maps/all.html#eb8d">Map</a></td>
<td class="next">
Next: <a href="EBD8.html">EBD8</a>
</td>
</tr>
</table>
<div class="description">EB8D: Handler: Unlock Door</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="EBD8.html">Handler_Player</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Handler_UnlockDoor</td>
<td class="address-2"><span id="eb8d"></span>EB8D</td>
<td class="instruction">LD A,$05</td>
<td class="comment-1" rowspan="2">Write 05 to *<a href="FFFE.html">SoundFlag_General</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb8f"></span>EB8F</td>
<td class="instruction">LD ($FFFE),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb92"></span>EB92</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Stash <span class="register">IX</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb94"></span>EB94</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="2"><span class="register">IX</span>=<span class="register">HL</span> (using the stack).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb95"></span>EB95</td>
<td class="instruction">POP IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb97"></span>EB97</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Stash <span class="register">BC</span> and <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb98"></span>EB98</td>
<td class="instruction">PUSH DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb99"></span>EB99</td>
<td class="instruction">LD C,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb9c"></span>EB9C</td>
<td class="instruction">LD B,(IX+$01)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+01.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eb9f"></span>EB9F</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eba0"></span>EBA0</td>
<td class="instruction">LD (IX+$05),$00</td>
<td class="comment-1" rowspan="1">Write 00 to *<span class="register">IX</span>+05.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eba4"></span>EBA4</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eba5"></span>EBA5</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Stash <span class="register">IX</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="eba7"></span>EBA7</td>
<td class="instruction">LD DE,$0032</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0032.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebaa"></span>EBAA</td>
<td class="instruction">LD HL,$00C8</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=00C8.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebad"></span>EBAD</td>
<td class="instruction">CALL $03B5</td>
<td class="comment-1" rowspan="1">Call <a href="https://skoolkit.ca/disassemblies/rom/hex/asm/03B5.html">BEEPER</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebb0"></span>EBB0</td>
<td class="instruction">POP IX</td>
<td class="comment-1" rowspan="1">Restore <span class="register">IX</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebb2"></span>EBB2</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebb3"></span>EBB3</td>
<td class="instruction">LD HL,($5C36)</td>
<td class="comment-1" rowspan="2">Stash *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebb6"></span>EBB6</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebb7"></span>EBB7</td>
<td class="instruction">LD HL,$9F6C</td>
<td class="comment-1" rowspan="2">Write <a href="A06C.html">9F6C</a> (<a href="A06C.html">Graphics_MaskSprite</a>) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebba"></span>EBBA</td>
<td class="instruction">LD ($5C36),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebbd"></span>EBBD</td>
<td class="instruction">LD D,$04</td>
<td class="comment-1" rowspan="2"><span class="register">DE</span>=Set the sprite width/ height (01/ 04).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebbf"></span>EBBF</td>
<td class="instruction">LD E,$01</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebc1"></span>EBC1</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebc3"></span>EBC3</td>
<td class="instruction">CALL <a href="E72F.html">$E72F</a></td>
<td class="comment-1" rowspan="1">Call <a href="E72F.html">E72F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebc6"></span>EBC6</td>
<td class="instruction">LD A,$20</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=20.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebc8"></span>EBC8</td>
<td class="instruction">CALL <a href="EA93.html">PrintSprite</a></td>
<td class="comment-1" rowspan="1">Call <a href="EA93.html">PrintSprite</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebcb"></span>EBCB</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="2">Restore the previous value of *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebcc"></span>EBCC</td>
<td class="instruction">LD ($5C36),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebcf"></span>EBCF</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="3">Restore <span class="register">DE</span>, <span class="register">BC</span> and <span class="register">IX</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebd0"></span>EBD0</td>
<td class="instruction">POP BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebd1"></span>EBD1</td>
<td class="instruction">POP IX</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebd3"></span>EBD3</td>
<td class="instruction">LD (IX+$10),$00</td>
<td class="comment-1" rowspan="1">Write 00 to *<span class="register">IX</span>+10.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="ebd7"></span>EBD7</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="EB49.html">EB49</a>
</td>
<td class="up">Up: <a href="../maps/all.html#eb8d">Map</a></td>
<td class="next">
Next: <a href="EBD8.html">EBD8</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 Firebird &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.1.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/booty/">Source code</a>.</div>
<div><a href="asm/EB8D.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>