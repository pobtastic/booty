<!DOCTYPE html>
<html>
<head>
<title>Booty: Routine at A900</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A8D8.html">A8D8</a>
</td>
<td class="up">Up: <a href="../maps/all.html#a900">Map</a></td>
<td class="next">
Next: <a href="AA97.html">AA97</a>
</td>
</tr>
</table>
<div class="description">A900: Draw Room</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="A804.html">ControllerDrawRoom</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoom</td>
<td class="address-2"><span id="a900"></span>A900</td>
<td class="instruction">LD A,$00</td>
<td class="comment-1" rowspan="2">Write 00 to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C8D.html">ATTR_P</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a902"></span>A902</td>
<td class="instruction">LD ($5C8D),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a905"></span>A905</td>
<td class="instruction">CALL <a href="A8D8.html">ClearRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8D8.html">ClearRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a908"></span>A908</td>
<td class="instruction">LD A,($5BD1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="5BD1.html">CurrentRoom_PaperColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a90b"></span>A90B</td>
<td class="instruction">SLA A</td>
<td class="comment-1" rowspan="3">Shift <span class="register">A</span> left three positions (with carry).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a90d"></span>A90D</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a90f"></span>A90F</td>
<td class="instruction">SLA A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a911"></span>A911</td>
<td class="instruction">LD ($5C8D),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C8D.html">ATTR_P</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a914"></span>A914</td>
<td class="instruction">LD A,$11</td>
<td class="comment-1" rowspan="4">Set PAPER: *<a href="5BD1.html">CurrentRoom_PaperColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a916"></span>A916</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a917"></span>A917</td>
<td class="instruction">LD A,($5BD1)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a91a"></span>A91A</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a91b"></span>A91B</td>
<td class="instruction">LD HL,$8378</td>
<td class="comment-1" rowspan="2">Write <a href="8478.html">8378</a> (<a href="8478.html">Graphics_RoomScaffolding_Empty</a>) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a91e"></span>A91E</td>
<td class="instruction">LD ($5C36),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a921"></span>A921</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BCF.html">CurrentRoom_ScaffoldingColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a923"></span>A923</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a924"></span>A924</td>
<td class="instruction">LD A,($5BCF)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a927"></span>A927</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a928"></span>A928</td>
<td class="instruction">LD HL,($5BE8)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="5BE8.html">5BE8</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="a92b"></span>
<div class="comments">
<div class="paragraph">
Draw the ceilings/ floors.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomScaffolding</td>
<td class="address-2"><span id="a92b"></span>A92B</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a92c"></span>A92C</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a92d"></span>A92D</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a92e"></span>A92E</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a92f"></span>A92F</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#a952">DrawRoomLadders</a> if FF is equal to <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a931"></span>A931</td>
<td class="instruction">CP C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a932"></span>A932</td>
<td class="instruction">JR Z,<a href="A900.html#a952">DrawRoomLadders</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a934"></span>A934</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a935"></span>A935</td>
<td class="instruction">CALL <a href="A86E.html">$A86E</a></td>
<td class="comment-1" rowspan="1">Call <a href="A86E.html">A86E</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a938"></span>A938</td>
<td class="instruction">CALL $0DD9</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a93b"></span>A93B</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a93c"></span>A93C</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a93d"></span>A93D</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomScaffolding_Loop</td>
<td class="address-2"><span id="a93e"></span>A93E</td>
<td class="instruction">LD A,$21</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#8480">Graphics_RoomScaffolding_Top1</a> (21).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a940"></span>A940</td>
<td class="instruction">CALL <a href="A893.html">PopulateRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A893.html">PopulateRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a943"></span>A943</td>
<td class="instruction">CALL <a href="A817.html">PrintUDG</a></td>
<td class="comment-1" rowspan="1">Call <a href="A817.html">PrintUDG</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a946"></span>A946</td>
<td class="instruction">LD A,$22</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#8488">Graphics_RoomScaffolding_Top2</a> (22).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a948"></span>A948</td>
<td class="instruction">CALL <a href="A893.html">PopulateRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A893.html">PopulateRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a94b"></span>A94B</td>
<td class="instruction">CALL <a href="A817.html">PrintUDG</a></td>
<td class="comment-1" rowspan="1">Call <a href="A817.html">PrintUDG</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a94e"></span>A94E</td>
<td class="instruction">DJNZ <a href="A900.html#a93e">DrawRoomScaffolding_Loop</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="A900.html#a93e">DrawRoomScaffolding_Loop</a> until counter is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a950"></span>A950</td>
<td class="instruction">JR <a href="A900.html#a92b">DrawRoomScaffolding</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#a92b">DrawRoomScaffolding</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="a952"></span>
<div class="comments">
<div class="paragraph">
Draw the ladders.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomLadders</td>
<td class="address-2"><span id="a952"></span>A952</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BD2.html">CurrentRoom_LadderColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a954"></span>A954</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a955"></span>A955</td>
<td class="instruction">LD A,($5BD2)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a958"></span>A958</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a959"></span>A959</td>
<td class="instruction">LD HL,($5BD8)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="5BD8.html">ReferenceLadders</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomLadders_Loop</td>
<td class="address-2"><span id="a95c"></span>A95C</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a95d"></span>A95D</td>
<td class="instruction">CP $FF</td>
<td class="comment-1" rowspan="2">Jump to <a href="A900.html#a973">DrawRoomDoors</a> if the room data is the termination byte (FF).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a95f"></span>A95F</td>
<td class="instruction">JR Z,<a href="A900.html#a973">DrawRoomDoors</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a961"></span>A961</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a962"></span>A962</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a963"></span>A963</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a964"></span>A964</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a965"></span>A965</td>
<td class="instruction">LD A,$2F</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#84f0">Graphics_Ladder</a> (2F).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a967"></span>A967</td>
<td class="instruction">LD E,$02</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=Sprite width (02).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a969"></span>A969</td>
<td class="instruction">LD D,$05</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=Sprite height (05).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a96b"></span>A96B</td>
<td class="instruction">CALL <a href="A83F.html">$A83F</a></td>
<td class="comment-1" rowspan="1">Call <a href="A83F.html">A83F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a96e"></span>A96E</td>
<td class="instruction">CALL <a href="A8AF.html">$A8AF</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8AF.html">A8AF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a971"></span>A971</td>
<td class="instruction">JR <a href="A900.html#a95c">DrawRoomLadders_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#a95c">DrawRoomLadders_Loop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="a973"></span>
<div class="comments">
<div class="paragraph">
Draws the front facing doors which lead to other rooms.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomDoors</td>
<td class="address-2"><span id="a973"></span>A973</td>
<td class="instruction">LD HL,($5BD6)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a href="5BD6.html">CurrentRoom_DoorColour</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomDoors_Loop</td>
<td class="address-2"><span id="a976"></span>A976</td>
<td class="instruction">LD C,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a977"></span>A977</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a978"></span>A978</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a979"></span>A979</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a97a"></span>A97A</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a97b"></span>A97B</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="2">Increment <span class="register">HL</span> by two.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a97c"></span>A97C</td>
<td class="instruction">INC HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a97d"></span>A97D</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a97e"></span>A97E</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#a996">DrawRoomKeysAndLockedDoors</a> if FF is equal to <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a980"></span>A980</td>
<td class="instruction">CP C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a981"></span>A981</td>
<td class="instruction">JR Z,<a href="A900.html#a996">DrawRoomKeysAndLockedDoors</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a983"></span>A983</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="2">Set INK to ...</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a985"></span>A985</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a986"></span>A986</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a987"></span>A987</td>
<td class="instruction">RST $10</td>
<td class="comment-1" rowspan="1">... the value held in <span class="register">A</span> (from the stack).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a988"></span>A988</td>
<td class="instruction">LD A,$23</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#8490">Graphics_Door</a> (23).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a98a"></span>A98A</td>
<td class="instruction">LD E,$03</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=Sprite width (03).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a98c"></span>A98C</td>
<td class="instruction">LD D,$04</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=Sprite height (04).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a98e"></span>A98E</td>
<td class="instruction">CALL <a href="A83F.html">$A83F</a></td>
<td class="comment-1" rowspan="1">Call <a href="A83F.html">A83F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a991"></span>A991</td>
<td class="instruction">CALL <a href="A8AF.html">$A8AF</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8AF.html">A8AF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a994"></span>A994</td>
<td class="instruction">JR <a href="A900.html#a976">DrawRoomDoors_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#a976">DrawRoomDoors_Loop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="a996"></span>
<div class="comments">
<div class="paragraph">
Draws the numbered keys and locked doors which correlate to them.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomKeysAndLockedDoors</td>
<td class="address-2"><span id="a996"></span>A996</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a997"></span>A997</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BCF.html">CurrentRoom_ScaffoldingColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a999"></span>A999</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a99a"></span>A99A</td>
<td class="instruction">LD A,($5BCF)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a99d"></span>A99D</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a99e"></span>A99E</td>
<td class="instruction">LD IX,($5BDA)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=*<a href="5BDA.html">ReferenceKeysAndLockedDoors</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomKeysAndLockedDoors_Loop</td>
<td class="address-2"><span id="a9a2"></span>A9A2</td>
<td class="instruction">LD C,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9a5"></span>A9A5</td>
<td class="instruction">LD A,$FF</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#aa1c">DrawRoomItems</a> if FF is equal to <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9a7"></span>A9A7</td>
<td class="instruction">CP C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9a8"></span>A9A8</td>
<td class="instruction">JR Z,<a href="A900.html#aa1c">DrawRoomItems</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9aa"></span>A9AA</td>
<td class="instruction">LD A,(IX+$05)</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#aa15">DrawRoomKeysAndLockedDoors_Next</a> if *<span class="register">IX</span>+05 is equal to 00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9ad"></span>A9AD</td>
<td class="instruction">CP $00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9af"></span>A9AF</td>
<td class="instruction">JR Z,<a href="A900.html#aa15">DrawRoomKeysAndLockedDoors_Next</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9b1"></span>A9B1</td>
<td class="instruction">LD (IX+$05),$03</td>
<td class="comment-1" rowspan="1">Write 03 to *<span class="register">IX</span>+05.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9b5"></span>A9B5</td>
<td class="instruction">LD B,(IX+$01)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+01.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9b8"></span>A9B8</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9b9"></span>A9B9</td>
<td class="instruction">CALL <a href="A86E.html">$A86E</a></td>
<td class="comment-1" rowspan="1">Call <a href="A86E.html">A86E</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9bc"></span>A9BC</td>
<td class="instruction">CALL $0DD9</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9bf"></span>A9BF</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BCF.html">CurrentRoom_ScaffoldingColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9c1"></span>A9C1</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9c2"></span>A9C2</td>
<td class="instruction">LD A,($5BCF)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9c5"></span>A9C5</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9c6"></span>A9C6</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+04.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9c9"></span>A9C9</td>
<td class="instruction">ADD A,$38</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=38.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9cb"></span>A9CB</td>
<td class="instruction">CALL <a href="A893.html">PopulateRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A893.html">PopulateRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9ce"></span>A9CE</td>
<td class="instruction">CALL <a href="A817.html">PrintUDG</a></td>
<td class="comment-1" rowspan="1">Call <a href="A817.html">PrintUDG</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d1"></span>A9D1</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BCD.html">CurrentRoom_ClosedDoorColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d3"></span>A9D3</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d4"></span>A9D4</td>
<td class="instruction">LD A,($5BCD)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d7"></span>A9D7</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d8"></span>A9D8</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9d9"></span>A9D9</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9da"></span>A9DA</td>
<td class="instruction">LD A,$4C</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#85d8">Graphics_DoorClosed</a> (4C).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9dc"></span>A9DC</td>
<td class="instruction">LD E,$01</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=Sprite width (01).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9de"></span>A9DE</td>
<td class="instruction">LD D,$04</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=Sprite height (04).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9e0"></span>A9E0</td>
<td class="instruction">CALL <a href="A83F.html">$A83F</a></td>
<td class="comment-1" rowspan="1">Call <a href="A83F.html">A83F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9e3"></span>A9E3</td>
<td class="instruction">CALL <a href="A8AF.html">$A8AF</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8AF.html">A8AF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9e6"></span>A9E6</td>
<td class="instruction">LD C,(IX+$02)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+02.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9e9"></span>A9E9</td>
<td class="instruction">LD B,(IX+$03)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+03.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9ec"></span>A9EC</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9ed"></span>A9ED</td>
<td class="instruction">CALL <a href="A86E.html">$A86E</a></td>
<td class="comment-1" rowspan="1">Call <a href="A86E.html">A86E</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9f0"></span>A9F0</td>
<td class="instruction">CALL $0DD9</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9f3"></span>A9F3</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<a href="5BCC.html">CurrentRoom_KeyColour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9f5"></span>A9F5</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9f6"></span>A9F6</td>
<td class="instruction">LD A,($5BCC)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9f9"></span>A9F9</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9fa"></span>A9FA</td>
<td class="instruction">LD A,(IX+$04)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+04.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9fd"></span>A9FD</td>
<td class="instruction">ADD A,$41</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=41.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="a9ff"></span>A9FF</td>
<td class="instruction">CALL <a href="A893.html">PopulateRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A893.html">PopulateRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa02"></span>AA02</td>
<td class="instruction">CALL <a href="A817.html">PrintUDG</a></td>
<td class="comment-1" rowspan="1">Call <a href="A817.html">PrintUDG</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa05"></span>AA05</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa06"></span>AA06</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa07"></span>AA07</td>
<td class="instruction">CALL <a href="A86E.html">$A86E</a></td>
<td class="comment-1" rowspan="1">Call <a href="A86E.html">A86E</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa0a"></span>AA0A</td>
<td class="instruction">CALL $0DD9</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="aa0d"></span>
<div class="comments">
<div class="paragraph">
All the keys share the same bottom half.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa0d"></span>AA0D</td>
<td class="instruction">LD A,$4B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<a href="8478.html#85d0">Graphics_KeyBottom</a> (4B).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa0f"></span>AA0F</td>
<td class="instruction">CALL <a href="A893.html">PopulateRoomBuffer</a></td>
<td class="comment-1" rowspan="1">Call <a href="A893.html">PopulateRoomBuffer</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa12"></span>AA12</td>
<td class="instruction">CALL <a href="A817.html">PrintUDG</a></td>
<td class="comment-1" rowspan="1">Call <a href="A817.html">PrintUDG</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomKeysAndLockedDoors_Next</td>
<td class="address-2"><span id="aa15"></span>AA15</td>
<td class="instruction">LD DE,$0006</td>
<td class="comment-1" rowspan="2"><span class="register">IX</span>+=0006.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa18"></span>AA18</td>
<td class="instruction">ADD IX,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa1a"></span>AA1A</td>
<td class="instruction">JR <a href="A900.html#a9a2">DrawRoomKeysAndLockedDoors_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#a9a2">DrawRoomKeysAndLockedDoors_Loop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="aa1c"></span>
<div class="comments">
<div class="paragraph">
Draw room items.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomItems</td>
<td class="address-2"><span id="aa1c"></span>AA1C</td>
<td class="instruction">LD IX,($5BE0)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=*<a href="5BE0.html">ReferenceItems</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomItems_Loop</td>
<td class="address-2"><span id="aa20"></span>AA20</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#aa4f">DrawRoomFurniture</a> if *<span class="register">IX</span>+00 is equal to FF.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa23"></span>AA23</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa25"></span>AA25</td>
<td class="instruction">JR Z,<a href="A900.html#aa4f">DrawRoomFurniture</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa27"></span>AA27</td>
<td class="instruction">LD A,(IX+$05)</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#aa48">DrawRoomItems_Next</a> if *<span class="register">IX</span>+05 is equal to 00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa2a"></span>AA2A</td>
<td class="instruction">CP $00</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa2c"></span>AA2C</td>
<td class="instruction">JR Z,<a href="A900.html#aa48">DrawRoomItems_Next</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa2e"></span>AA2E</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<span class="register">IX</span>+04.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa30"></span>AA30</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa31"></span>AA31</td>
<td class="instruction">LD A,(IX+$04)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa34"></span>AA34</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa35"></span>AA35</td>
<td class="instruction">LD C,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa38"></span>AA38</td>
<td class="instruction">LD B,(IX+$01)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+01.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa3b"></span>AA3B</td>
<td class="instruction">LD D,$02</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=Sprite height (02).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa3d"></span>AA3D</td>
<td class="instruction">LD E,$02</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=Sprite width (02).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa3f"></span>AA3F</td>
<td class="instruction">LD A,(IX+$06)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+06.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa42"></span>AA42</td>
<td class="instruction">CALL <a href="A83F.html">$A83F</a></td>
<td class="comment-1" rowspan="1">Call <a href="A83F.html">A83F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa45"></span>AA45</td>
<td class="instruction">CALL <a href="A8AF.html">$A8AF</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8AF.html">A8AF</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomItems_Next</td>
<td class="address-2"><span id="aa48"></span>AA48</td>
<td class="instruction">LD DE,$0007</td>
<td class="comment-1" rowspan="2"><span class="register">IX</span>+=0007.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa4b"></span>AA4B</td>
<td class="instruction">ADD IX,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa4d"></span>AA4D</td>
<td class="instruction">JR <a href="A900.html#aa20">DrawRoomItems_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#aa20">DrawRoomItems_Loop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="aa4f"></span>
<div class="comments">
<div class="paragraph">
Draw all the room "furniture", like the barrels and stacks of crates.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">DrawRoomFurniture</td>
<td class="address-2"><span id="aa4f"></span>AA4F</td>
<td class="instruction">LD HL,$8678</td>
<td class="comment-1" rowspan="2">Write <a href="8778.html">8678</a> (<a href="8778.html">Graphics_Barrels</a>) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa52"></span>AA52</td>
<td class="instruction">LD ($5C36),HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa55"></span>AA55</td>
<td class="instruction">LD IX,($5BE2)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=*<a href="5BE2.html">ReferenceFurniture</a>.</td>
</tr>
<tr>
<td class="asm-label">DrawRoomFurniture_Loop</td>
<td class="address-2"><span id="aa59"></span>AA59</td>
<td class="instruction">LD A,(IX+$00)</td>
<td class="comment-1" rowspan="3">Jump to <a href="A900.html#aa85">WriteRoomAttributes</a> if *<span class="register">IX</span>+00 is equal to FF.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa5c"></span>AA5C</td>
<td class="instruction">CP $FF</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa5e"></span>AA5E</td>
<td class="instruction">JR Z,<a href="A900.html#aa85">WriteRoomAttributes</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa60"></span>AA60</td>
<td class="instruction">LD A,$10</td>
<td class="comment-1" rowspan="4">Set INK: *<span class="register">IX</span>+03.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa62"></span>AA62</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa63"></span>AA63</td>
<td class="instruction">LD A,(IX+$03)</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa66"></span>AA66</td>
<td class="instruction">RST $10</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa67"></span>AA67</td>
<td class="instruction">LD C,(IX+$00)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+00.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa6a"></span>AA6A</td>
<td class="instruction">LD B,(IX+$01)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+01.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa6d"></span>AA6D</td>
<td class="instruction">LD D,$04</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=Sprite height (04).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa6f"></span>AA6F</td>
<td class="instruction">LD E,$06</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=Sprite width (06).</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa71"></span>AA71</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+02.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa74"></span>AA74</td>
<td class="instruction">OR %10000000</td>
<td class="comment-1" rowspan="1">Set bit 7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa76"></span>AA76</td>
<td class="instruction">CALL <a href="A83F.html">$A83F</a></td>
<td class="comment-1" rowspan="1">Call <a href="A83F.html">A83F</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa79"></span>AA79</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa7b"></span>AA7B</td>
<td class="instruction">CALL <a href="A8AF.html">$A8AF</a></td>
<td class="comment-1" rowspan="1">Call <a href="A8AF.html">A8AF</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa7e"></span>AA7E</td>
<td class="instruction">LD DE,$0004</td>
<td class="comment-1" rowspan="2"><span class="register">IX</span>+=0004.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa81"></span>AA81</td>
<td class="instruction">ADD IX,DE</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa83"></span>AA83</td>
<td class="instruction">JR <a href="A900.html#aa59">DrawRoomFurniture_Loop</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="A900.html#aa59">DrawRoomFurniture_Loop</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="aa85"></span>
<div class="comments">
<div class="paragraph">
Copy the room attributes buffer to the screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">WriteRoomAttributes</td>
<td class="address-2"><span id="aa85"></span>AA85</td>
<td class="instruction">LD DE,$5800</td>
<td class="comment-1" rowspan="4">Copy 0300 bytes of data from <a href="A4E4.html">BufferRoomAttributes</a> to the attribute buffer.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa88"></span>AA88</td>
<td class="instruction">LD HL,$A4E4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa8b"></span>AA8B</td>
<td class="instruction">LD BC,$0300</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa8e"></span>AA8E</td>
<td class="instruction">LDIR</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa90"></span>AA90</td>
<td class="instruction">LD A,($5BD0)</td>
<td class="comment-1" rowspan="2">Set the border to *<a href="5BD0.html">Current_BorderColour</a> using <a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/2294.html#229b">BORDER</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa93"></span>AA93</td>
<td class="instruction">CALL $229B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="aa96"></span>AA96</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="A8D8.html">A8D8</a>
</td>
<td class="up">Up: <a href="../maps/all.html#a900">Map</a></td>
<td class="next">
Next: <a href="AA97.html">AA97</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 Firebird &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.1.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/booty/">Source code</a>.</div>
<div><a href="asm/A900.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>