<!DOCTYPE html>
<html>
<head>
<title>Booty: Routine at 58609</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58490.html">58490</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58609">Map</a></td>
<td class="next">
Next: <a href="59068.html">59068</a>
</td>
</tr>
</table>
<div class="description">58609: Routine at E4F1</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="57000.html">InitialiseGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58609"></span>58609</td>
<td class="instruction">LD IX,(23524)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="23524.html">23524</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58613"></span>58613</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Return if *<span class="register">IX</span>+0 is equal to 255.</td>
</tr>
<tr>
<td class="address-1"><span id="58616"></span>58616</td>
<td class="instruction">CP 255</td>
</tr>
<tr>
<td class="address-1"><span id="58618"></span>58618</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="address-1"><span id="58619"></span>58619</td>
<td class="instruction">LD A,(IX+5)</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#58673">58673</a> if *<span class="register">IX</span>+5 is equal to 0.</td>
</tr>
<tr>
<td class="address-1"><span id="58622"></span>58622</td>
<td class="instruction">CP 0</td>
</tr>
<tr>
<td class="address-1"><span id="58624"></span>58624</td>
<td class="instruction">JR Z,<a href="58609.html#58673">58673</a></td>
</tr>
<tr>
<td class="address-1"><span id="58626"></span>58626</td>
<td class="instruction">LD C,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="address-1"><span id="58629"></span>58629</td>
<td class="instruction">LD B,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="address-1"><span id="58632"></span>58632</td>
<td class="instruction">LD A,(IX+3)</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#58695">58695</a> if *<span class="register">IX</span>+3 is equal to 3.</td>
</tr>
<tr>
<td class="address-1"><span id="58635"></span>58635</td>
<td class="instruction">CP 3</td>
</tr>
<tr>
<td class="address-1"><span id="58637"></span>58637</td>
<td class="instruction">JR Z,<a href="58609.html#58695">58695</a></td>
</tr>
<tr>
<td class="address-1"><span id="58639"></span>58639</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="2">Jump to <a href="58609.html#58680">58680</a> if *<span class="register">IX</span>+3 is equal to 2.</td>
</tr>
<tr>
<td class="address-1"><span id="58641"></span>58641</td>
<td class="instruction">JR Z,<a href="58609.html#58680">58680</a></td>
</tr>
<tr>
<td class="address-1"><span id="58643"></span>58643</td>
<td class="instruction">CP 1</td>
<td class="comment-1" rowspan="2">Jump to <a href="58609.html#58708">58708</a> if *<span class="register">IX</span>+3 is equal to 1.</td>
</tr>
<tr>
<td class="address-1"><span id="58645"></span>58645</td>
<td class="instruction">JR Z,<a href="58609.html#58708">58708</a></td>
</tr>
<tr>
<td class="address-1"><span id="58647"></span>58647</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58648"></span>58648</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58651"></span>58651</td>
<td class="instruction">LD D,4</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=4.</td>
</tr>
<tr>
<td class="address-2"><span id="58653"></span>58653</td>
<td class="instruction">LD B,(IX+7)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+7.</td>
</tr>
<tr>
<td class="address-1"><span id="58656"></span>58656</td>
<td class="instruction">LD A,255</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=255.</td>
</tr>
<tr>
<td class="address-1"><span id="58658"></span>58658</td>
<td class="instruction">LD HL,(23684)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58661"></span>58661</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58662"></span>58662</td>
<td class="instruction">LD (23684),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58665"></span>58665</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="address-2"><span id="58666"></span>58666</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58667"></span>58667</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58668"></span>58668</td>
<td class="instruction">DJNZ <a href="58609.html#58666">58666</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="58609.html#58666">58666</a> until counter is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="58670"></span>58670</td>
<td class="instruction">DEC D</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">D</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58671"></span>58671</td>
<td class="instruction">JR NZ,<a href="58609.html#58653">58653</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58653">58653</a> until <span class="register">D</span> is zero.</td>
</tr>
<tr>
<td class="address-2"><span id="58673"></span>58673</td>
<td class="instruction">LD DE,16</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0016.</td>
</tr>
<tr>
<td class="address-1"><span id="58676"></span>58676</td>
<td class="instruction">ADD IX,DE</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>+=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58678"></span>58678</td>
<td class="instruction">JR <a href="58609.html#58613">58613</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58613">58613</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58680"></span>58680</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58683"></span>58683</td>
<td class="instruction">LD HL,(23684)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58686"></span>58686</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="4">Increment <span class="register">H</span> by four.</td>
</tr>
<tr>
<td class="address-1"><span id="58687"></span>58687</td>
<td class="instruction">INC H</td>
</tr>
<tr>
<td class="address-1"><span id="58688"></span>58688</td>
<td class="instruction">INC H</td>
</tr>
<tr>
<td class="address-1"><span id="58689"></span>58689</td>
<td class="instruction">INC H</td>
</tr>
<tr>
<td class="address-1"><span id="58690"></span>58690</td>
<td class="instruction">LD (23684),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58693"></span>58693</td>
<td class="instruction">JR <a href="58609.html#58651">58651</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58651">58651</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58695"></span>58695</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58698"></span>58698</td>
<td class="instruction">LD HL,(23684)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58701"></span>58701</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="2">Increment <span class="register">H</span> by two.</td>
</tr>
<tr>
<td class="address-1"><span id="58702"></span>58702</td>
<td class="instruction">INC H</td>
</tr>
<tr>
<td class="address-1"><span id="58703"></span>58703</td>
<td class="instruction">LD (23684),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58706"></span>58706</td>
<td class="instruction">JR <a href="58609.html#58651">58651</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58651">58651</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58708"></span>58708</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Stash <span class="register">BC</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="58709"></span>58709</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58712"></span>58712</td>
<td class="instruction">LD HL,(23684)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58715"></span>58715</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">H</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58716"></span>58716</td>
<td class="instruction">ADD A,6</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=6.</td>
</tr>
<tr>
<td class="address-1"><span id="58718"></span>58718</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58719"></span>58719</td>
<td class="instruction">LD (23684),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58722"></span>58722</td>
<td class="instruction">LD D,2</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=2.</td>
</tr>
<tr>
<td class="address-2"><span id="58724"></span>58724</td>
<td class="instruction">LD HL,(23684)</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=*<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58727"></span>58727</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Increment <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58728"></span>58728</td>
<td class="instruction">LD (23684),HL</td>
<td class="comment-1" rowspan="1">Write <span class="register">HL</span> to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C84.html">DF_CC</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58731"></span>58731</td>
<td class="instruction">DEC H</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">H</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58732"></span>58732</td>
<td class="instruction">LD A,255</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=255.</td>
</tr>
<tr>
<td class="address-1"><span id="58734"></span>58734</td>
<td class="instruction">LD B,(IX+7)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+7.</td>
</tr>
<tr>
<td class="address-2"><span id="58737"></span>58737</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58738"></span>58738</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58739"></span>58739</td>
<td class="instruction">DJNZ <a href="58609.html#58737">58737</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="58609.html#58737">58737</a> until counter is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="58741"></span>58741</td>
<td class="instruction">DEC D</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">D</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58742"></span>58742</td>
<td class="instruction">JR NZ,<a href="58609.html#58724">58724</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58724">58724</a> until <span class="register">D</span> is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="58744"></span>58744</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore <span class="register">BC</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="58745"></span>58745</td>
<td class="instruction">DEC B</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">B</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58746"></span>58746</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58749"></span>58749</td>
<td class="instruction">LD D,2</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=2.</td>
</tr>
<tr>
<td class="address-1"><span id="58751"></span>58751</td>
<td class="instruction">JR <a href="58609.html#58653">58653</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58653">58653</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58753"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="57000.html">InitialiseGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58753"></span>58753</td>
<td class="instruction">LD IX,(23526)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="23526.html">23526</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58757"></span>58757</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Return if *<span class="register">IX</span>+0 is equal to 255.</td>
</tr>
<tr>
<td class="address-1"><span id="58760"></span>58760</td>
<td class="instruction">CP 255</td>
</tr>
<tr>
<td class="address-1"><span id="58762"></span>58762</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="address-1"><span id="58763"></span>58763</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58766"></span>58766</td>
<td class="instruction">AND %10000000</td>
<td class="comment-1" rowspan="1">Keep only bit 7.</td>
</tr>
<tr>
<td class="address-1"><span id="58768"></span>58768</td>
<td class="instruction">JP Z,<a href="58609.html#58821">58821</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58821">58821</a> if the result is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="58771"></span>58771</td>
<td class="instruction">LD HL,40812</td>
<td class="comment-1" rowspan="2">Write <a href="41068.html">40812</a> (<a href="41068.html">41068</a>) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58774"></span>58774</td>
<td class="instruction">LD (23606),HL</td>
</tr>
<tr>
<td class="address-1"><span id="58777"></span>58777</td>
<td class="instruction">INC (IX+5)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">IX</span>+5 by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58780"></span>58780</td>
<td class="instruction">LD A,(IX+4)</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#58800">58800</a> if *<span class="register">IX</span>+4 is not equal to *<span class="register">IX</span>+5.</td>
</tr>
<tr>
<td class="address-1"><span id="58783"></span>58783</td>
<td class="instruction">CP (IX+5)</td>
</tr>
<tr>
<td class="address-1"><span id="58786"></span>58786</td>
<td class="instruction">JR NZ,<a href="58609.html#58800">58800</a></td>
</tr>
<tr>
<td class="address-1"><span id="58788"></span>58788</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58791"></span>58791</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="address-1"><span id="58793"></span>58793</td>
<td class="instruction">LD (IX+2),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58796"></span>58796</td>
<td class="instruction">LD (IX+5),0</td>
<td class="comment-1" rowspan="1">Write 5 to *<span class="register">IX</span>+5.</td>
</tr>
<tr>
<td class="address-2"><span id="58800"></span>58800</td>
<td class="instruction">LD C,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="address-1"><span id="58803"></span>58803</td>
<td class="instruction">LD B,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="address-1"><span id="58806"></span>58806</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58809"></span>58809</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="address-1"><span id="58811"></span>58811</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58812"></span>58812</td>
<td class="instruction">LD D,1</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=1.</td>
</tr>
<tr>
<td class="address-1"><span id="58814"></span>58814</td>
<td class="instruction">LD A,32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=32.</td>
</tr>
<tr>
<td class="address-1"><span id="58816"></span>58816</td>
<td class="instruction">CALL <a href="60051.html">60051</a></td>
<td class="comment-1" rowspan="1">Call <a href="60051.html">60051</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58819"></span>58819</td>
<td class="instruction">JR <a href="58609.html#58861">58861</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58861">58861</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58821"></span>58821</td>
<td class="instruction">LD A,(IX+3)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+3.</td>
</tr>
<tr>
<td class="address-1"><span id="58824"></span>58824</td>
<td class="instruction">INC (IX+5)</td>
<td class="comment-1" rowspan="1">Increment *<span class="register">IX</span>+5 by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58827"></span>58827</td>
<td class="instruction">CP (IX+5)</td>
<td class="comment-1" rowspan="2">Jump to <a href="58609.html#58844">58844</a> if <span class="register">A</span> is not equal to *<span class="register">IX</span>+5.</td>
</tr>
<tr>
<td class="address-1"><span id="58830"></span>58830</td>
<td class="instruction">JR NZ,<a href="58609.html#58844">58844</a></td>
</tr>
<tr>
<td class="address-1"><span id="58832"></span>58832</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58835"></span>58835</td>
<td class="instruction">OR %10000000</td>
<td class="comment-1" rowspan="1">Set bit 7.</td>
</tr>
<tr>
<td class="address-1"><span id="58837"></span>58837</td>
<td class="instruction">LD (IX+2),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58840"></span>58840</td>
<td class="instruction">LD (IX+5),0</td>
<td class="comment-1" rowspan="1">Write 5 to *<span class="register">IX</span>+5.</td>
</tr>
<tr>
<td class="address-2"><span id="58844"></span>58844</td>
<td class="instruction">LD C,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="address-1"><span id="58847"></span>58847</td>
<td class="instruction">LD B,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="address-1"><span id="58850"></span>58850</td>
<td class="instruction">LD A,(IX+2)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="address-1"><span id="58853"></span>58853</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="address-1"><span id="58855"></span>58855</td>
<td class="instruction">LD E,A</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58856"></span>58856</td>
<td class="instruction">LD D,1</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=1.</td>
</tr>
<tr>
<td class="address-1"><span id="58858"></span>58858</td>
<td class="instruction">CALL <a href="59271.html">59271</a></td>
<td class="comment-1" rowspan="1">Call <a href="59271.html">59271</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58861"></span>58861</td>
<td class="instruction">LD DE,6</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0006.</td>
</tr>
<tr>
<td class="address-1"><span id="58864"></span>58864</td>
<td class="instruction">ADD IX,DE</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>+=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58866"></span>58866</td>
<td class="instruction">JR <a href="58609.html#58757">58757</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58757">58757</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58868"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="57000.html">InitialiseGame</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="58868"></span>58868</td>
<td class="instruction">LD IX,(23520)</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="23520.html">23520</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58872"></span>58872</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="3">Return if *<span class="register">IX</span>+0 is equal to 255.</td>
</tr>
<tr>
<td class="address-1"><span id="58875"></span>58875</td>
<td class="instruction">CP 255</td>
</tr>
<tr>
<td class="address-1"><span id="58877"></span>58877</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="address-1"><span id="58878"></span>58878</td>
<td class="instruction">LD C,A</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58879"></span>58879</td>
<td class="instruction">LD B,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="address-1"><span id="58882"></span>58882</td>
<td class="instruction">LD A,(IX+5)</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#58906">58906</a> if *<span class="register">IX</span>+5 is equal to 0.</td>
</tr>
<tr>
<td class="address-1"><span id="58885"></span>58885</td>
<td class="instruction">CP 0</td>
</tr>
<tr>
<td class="address-1"><span id="58887"></span>58887</td>
<td class="instruction">JR Z,<a href="58609.html#58906">58906</a></td>
</tr>
<tr>
<td class="address-1"><span id="58889"></span>58889</td>
<td class="instruction">LD A,(62002)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="62001.html#62002">62002</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58892"></span>58892</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58893"></span>58893</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="2">Jump to <a href="58609.html#58906">58906</a> if <span class="register">A</span> is not equal to <span class="register">B</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58894"></span>58894</td>
<td class="instruction">JR NZ,<a href="58609.html#58906">58906</a></td>
</tr>
<tr>
<td class="address-1"><span id="58896"></span>58896</td>
<td class="instruction">LD A,(62001)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="62001.html">62001</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58899"></span>58899</td>
<td class="instruction">SUB C</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=<span class="register">C</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58900"></span>58900</td>
<td class="instruction">JR Z,<a href="58609.html#58913">58913</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58913">58913</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="58902"></span>58902</td>
<td class="instruction">CP 255</td>
<td class="comment-1" rowspan="2">Jump to <a href="58609.html#58913">58913</a> if <span class="register">A</span> is equal to 255.</td>
</tr>
<tr>
<td class="address-1"><span id="58904"></span>58904</td>
<td class="instruction">JR Z,<a href="58609.html#58913">58913</a></td>
</tr>
<tr>
<td class="address-2"><span id="58906"></span>58906</td>
<td class="instruction">LD DE,7</td>
<td class="comment-1" rowspan="1"><span class="register">DE</span>=0007.</td>
</tr>
<tr>
<td class="address-1"><span id="58909"></span>58909</td>
<td class="instruction">ADD IX,DE</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>+=<span class="register">DE</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="58911"></span>58911</td>
<td class="instruction">JR <a href="58609.html#58872">58872</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="58609.html#58872">58872</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="58913"></span>58913</td>
<td class="instruction">CALL <a href="58209.html#58306">58306</a></td>
<td class="comment-1" rowspan="1">Call <a href="58209.html#58306">58306</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58916"></span>58916</td>
<td class="instruction">LD A,4</td>
<td class="comment-1" rowspan="2">Write 4 to *<a href="65529.html#65534">65534</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58918"></span>58918</td>
<td class="instruction">LD (65534),A</td>
</tr>
<tr>
<td class="address-1"><span id="58921"></span>58921</td>
<td class="instruction">LD A,0</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=0.</td>
</tr>
<tr>
<td class="address-1"><span id="58923"></span>58923</td>
<td class="instruction">LD D,2</td>
<td class="comment-1" rowspan="1"><span class="register">D</span>=2.</td>
</tr>
<tr>
<td class="address-1"><span id="58925"></span>58925</td>
<td class="instruction">LD E,2</td>
<td class="comment-1" rowspan="1"><span class="register">E</span>=2.</td>
</tr>
<tr>
<td class="address-1"><span id="58927"></span>58927</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Stash <span class="register">DE</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="58928"></span>58928</td>
<td class="instruction">CALL <a href="59183.html">59183</a></td>
<td class="comment-1" rowspan="1">Call <a href="59183.html">59183</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58931"></span>58931</td>
<td class="instruction">CALL 3545</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58934"></span>58934</td>
<td class="instruction">POP DE</td>
<td class="comment-1" rowspan="1">Restore <span class="register">DE</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="58935"></span>58935</td>
<td class="instruction">LD HL,40812</td>
<td class="comment-1" rowspan="2">Write <a href="41068.html">40812</a> (<a href="41068.html">41068</a>) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58938"></span>58938</td>
<td class="instruction">LD (23606),HL</td>
</tr>
<tr>
<td class="address-1"><span id="58941"></span>58941</td>
<td class="instruction">LD A,32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=32.</td>
</tr>
<tr>
<td class="address-1"><span id="58943"></span>58943</td>
<td class="instruction">CALL <a href="60051.html">60051</a></td>
<td class="comment-1" rowspan="1">Call <a href="60051.html">60051</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58946"></span>58946</td>
<td class="instruction">LD (IX+5),0</td>
<td class="comment-1" rowspan="1">Write 5 to *<span class="register">IX</span>+5.</td>
</tr>
<tr>
<td class="address-1"><span id="58950"></span>58950</td>
<td class="instruction">LD A,16</td>
<td class="comment-1" rowspan="4">Set INK: 6.</td>
</tr>
<tr>
<td class="address-1"><span id="58952"></span>58952</td>
<td class="instruction">RST 16</td>
</tr>
<tr>
<td class="address-1"><span id="58953"></span>58953</td>
<td class="instruction">LD A,6</td>
</tr>
<tr>
<td class="address-1"><span id="58955"></span>58955</td>
<td class="instruction">RST 16</td>
</tr>
<tr>
<td class="address-1"><span id="58956"></span>58956</td>
<td class="instruction">LD A,17</td>
<td class="comment-1" rowspan="4">Set PAPER: *<a href="23504.html">CurrentRoom_PaperColour</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58958"></span>58958</td>
<td class="instruction">RST 16</td>
</tr>
<tr>
<td class="address-1"><span id="58959"></span>58959</td>
<td class="instruction">LD A,(23504)</td>
</tr>
<tr>
<td class="address-1"><span id="58962"></span>58962</td>
<td class="instruction">RST 16</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="58963"></span>
<div class="comments">
<div class="paragraph">
Restore the default ZX Spectrum font.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="58963"></span>58963</td>
<td class="instruction">LD HL,15360</td>
<td class="comment-1" rowspan="2">Write <a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/3D00.html">15360</a> (CHARSET-256) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58966"></span>58966</td>
<td class="instruction">LD (23606),HL</td>
</tr>
<tr>
<td class="address-1"><span id="58969"></span>58969</td>
<td class="instruction">LD C,19</td>
<td class="comment-1" rowspan="3">Set up the screen buffer location 19/1 using <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58971"></span>58971</td>
<td class="instruction">LD B,1</td>
</tr>
<tr>
<td class="address-1"><span id="58973"></span>58973</td>
<td class="instruction">CALL 3545</td>
</tr>
<tr>
<td class="address-1"><span id="58976"></span>58976</td>
<td class="instruction">LD BC,(23540)</td>
<td class="comment-1" rowspan="3">Increment *<a href="23540.html">PlayerBooty</a> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58980"></span>58980</td>
<td class="instruction">INC BC</td>
</tr>
<tr>
<td class="address-1"><span id="58981"></span>58981</td>
<td class="instruction">LD (23540),BC</td>
</tr>
<tr>
<td class="address-1"><span id="58985"></span>58985</td>
<td class="instruction">CALL 6683</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/1A1B.html">OUT_NUM_1</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58988"></span>58988</td>
<td class="instruction">LD C,5</td>
<td class="comment-1" rowspan="3">Set up the screen buffer location 5/1 using <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/0DD9.html">CL_SET</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="58990"></span>58990</td>
<td class="instruction">LD B,1</td>
</tr>
<tr>
<td class="address-1"><span id="58992"></span>58992</td>
<td class="instruction">CALL 3545</td>
</tr>
<tr>
<td class="address-1"><span id="58995"></span>58995</td>
<td class="instruction">LD BC,(23538)</td>
<td class="comment-1" rowspan="3">Decrease *<a href="23538.html">PlayerTreasure</a> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="58999"></span>58999</td>
<td class="instruction">DEC BC</td>
</tr>
<tr>
<td class="address-1"><span id="59000"></span>59000</td>
<td class="instruction">LD (23538),BC</td>
</tr>
<tr>
<td class="address-1"><span id="59004"></span>59004</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#59033">59033</a> if <span class="register">B</span> is not equal to 0.</td>
</tr>
<tr>
<td class="address-1"><span id="59005"></span>59005</td>
<td class="instruction">CP 0</td>
</tr>
<tr>
<td class="address-1"><span id="59007"></span>59007</td>
<td class="instruction">JR NZ,<a href="58609.html#59033">59033</a></td>
</tr>
<tr>
<td class="address-1"><span id="59009"></span>59009</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="3">Jump to <a href="58609.html#59033">59033</a> if <span class="register">C</span> is not equal to 50.</td>
</tr>
<tr>
<td class="address-1"><span id="59010"></span>59010</td>
<td class="instruction">CP 50</td>
</tr>
<tr>
<td class="address-1"><span id="59012"></span>59012</td>
<td class="instruction">JR NZ,<a href="58609.html#59033">59033</a></td>
</tr>
<tr>
<td class="address-1"><span id="59014"></span>59014</td>
<td class="instruction">LD A,(23507)</td>
<td class="comment-1" rowspan="2">Write *<a href="23507.html">23507</a> to *<a href="23548.html">23548</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59017"></span>59017</td>
<td class="instruction">LD (23548),A</td>
</tr>
<tr>
<td class="address-1"><span id="59020"></span>59020</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="2">Write *<span class="register">IX</span>+0 to *<a href="23549.html">23549</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59023"></span>59023</td>
<td class="instruction">LD (23549),A</td>
</tr>
<tr>
<td class="address-1"><span id="59026"></span>59026</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="address-1"><span id="59029"></span>59029</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="59030"></span>59030</td>
<td class="instruction">LD (23550),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="23550.html">23550</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="59033"></span>59033</td>
<td class="instruction">LD A,C</td>
<td class="comment-1" rowspan="2">Compare <span class="register">C</span> with 0.</td>
</tr>
<tr>
<td class="address-1"><span id="59034"></span>59034</td>
<td class="instruction">CP 0</td>
</tr>
<tr>
<td class="address-1"><span id="59036"></span>59036</td>
<td class="instruction">PUSH AF</td>
<td class="comment-1" rowspan="1">Stash <span class="register">AF</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="59037"></span>59037</td>
<td class="instruction">CALL NZ,6683</td>
<td class="comment-1" rowspan="1">Call <a rel="noopener nofollow" href="https://skoolkid.github.io/rom/asm/1A1B.html">OUT_NUM_1</a> if <span class="register">C</span> was not zero on line <a href="58609.html#59033">59033</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59040"></span>59040</td>
<td class="instruction">LD A,32</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=ASCII "space" (32).</td>
</tr>
<tr>
<td class="address-1"><span id="59042"></span>59042</td>
<td class="instruction">CALL <a href="59100.html">PrintColourCharacter</a></td>
<td class="comment-1" rowspan="1">Call <a href="59100.html">PrintColourCharacter</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59045"></span>59045</td>
<td class="instruction">POP AF</td>
<td class="comment-1" rowspan="1">Restore <span class="register">AF</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="59046"></span>59046</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if {} is not zero.</td>
</tr>
<tr>
<td class="address-1"><span id="59047"></span>59047</td>
<td class="instruction">LD A,45</td>
<td class="comment-1" rowspan="2">Write 45 to *<a href="23551.html">23551</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59049"></span>59049</td>
<td class="instruction">LD (23551),A</td>
</tr>
<tr>
<td class="address-1"><span id="59052"></span>59052</td>
<td class="instruction">LD BC,20</td>
<td class="comment-1" rowspan="2">Write 0020 to *<a href="23546.html">23546</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59055"></span>59055</td>
<td class="instruction">LD (23546),BC</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="59059"></span>
<div class="comments">
<div class="paragraph">
Restore the default ZX Spectrum font.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="59059"></span>59059</td>
<td class="instruction">LD HL,15360</td>
<td class="comment-1" rowspan="2">Write <a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/3D00.html">15360</a> (CHARSET-256) to *<a rel="noopener nofollow" href="https://skoolkit.ca/disassemblies/rom/hex/asm/5C36.html">CHARS</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="59062"></span>59062</td>
<td class="instruction">LD (23606),HL</td>
</tr>
<tr>
<td class="address-1"><span id="59065"></span>59065</td>
<td class="instruction">JP <a href="57513.html#57591">PrintFindTheGoldKey</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="57513.html#57591">PrintFindTheGoldKey</a>.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="58490.html">58490</a>
</td>
<td class="up">Up: <a href="../maps/all.html#58609">Map</a></td>
<td class="next">
Next: <a href="59068.html">59068</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 Firebird &copy; 2024 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.1.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/booty/">Source code</a>.</div>
<div><a href="asm/58609.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>